package com.dirror.tcw_browser.util

import android.app.Activity
import android.content.Context
import android.content.Intent
import android.net.Uri
import android.os.Bundle
import android.os.Handler
import android.os.Looper
import android.util.Log
import android.view.*
import android.widget.Toast
import androidx.core.content.ContextCompat.startActivity
import com.dirror.tcw_browser.BuildConfig
import com.dirror.tcw_browser.MyApplication

/**
 * 顶层函数
 */

/**
 * 设置状态栏图标颜色
 * @param dark true 为黑色，false 为白色
 */
//fun setStatusBarIconColor(activity: Activity, dark: Boolean) {
//    StatusbarColorUtils.setStatusBarDarkIcon(activity, dark)
//}

/**
 * 全局 toast
 */
fun toast(msg: String) {
    runOnMainThread {
        Toast.makeText(MyApplication.context, msg, Toast.LENGTH_SHORT).show()
    }
}

/**
 * 全局 log
 */
fun loge(msg: String) {
    runOnMainThread {
        Log.e("Dirror 音乐", "【$msg】")
    }
}

// 运行在主线程，更新 UI
fun runOnMainThread(runnable: Runnable) {
    Handler(Looper.getMainLooper()).post(runnable)
}

// dp 转 px
fun dp2px(dp: Float): Float = dp * MyApplication.context.resources.displayMetrics.density

// http 转 https
fun http2https(http: String): String {
    return http.replace("http", "https")
}

/**
 * 获取系统当前时间
 */
fun getCurrentTime() : Long {
    return System.currentTimeMillis()
}


/**
 * 通过浏览器打开网页
 * @param context
 * @url 网址
 */
fun openUrlByBrowser(context: Context, url: String) {
    val intent = Intent()
    intent.action = "android.intent.action.VIEW"
    val contentUrl = Uri.parse(url)
    intent.data = contentUrl
    startActivity(context, intent, Bundle())
}

// 毫秒转日期
//fun msTimeToFormatDate(msTime: Long): String {
//    return TimeUtil.msTimeToFormatDate(msTime)
//}

/**
 * 获取状态栏高度
 * @return px 值
 */
//fun getStatusBarHeight(window: Window, context: Context): Int {
//    return StatusBarUtil.getStatusBarHeight(window, context)
//}

/**
 * 获取底部导航栏高度
 */
//fun getNavigationBarHeight(activity: Activity): Int {
//    return ScreenUtil.getNavigationBarHeight(activity)
//}

/**
 * 获取版本号
 */
fun getVisionCode(): Int {
    return BuildConfig.VERSION_CODE
}

/**
 * 获取版本名
 */
fun getVisionName(): String {
    return BuildConfig.VERSION_NAME
}